<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Refinement of Partition
</title>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$','$'] ],
          displayMath: [ ['$$','$$'] ],
        },
        "HTML-CSS": { availableFonts: ["TeX"] },
        TeX: {
          Macros: {
            // awesome, latex inside javascript inside html inside python
            // https://xkcd.com/1638/
            Vec: [ "\\overrightarrow{#1}", 1 ],
            abs: [ "\\left| {#1} \\right|", 1 ],
            I: [ "\\vec{i}", 0 ],
            J: [ "\\vec{j}", 0 ],
            K: [ "\\vec{k}", 0 ],

            // darkred is too dark, red is too bright
            red: [ "\\color{##c00}{#1}", 1 ],
            blue: [ "\\color{blue}{#1}", 1 ],
            green: [ "\\color{green}{#1}", 1 ],
            magenta: [ "\\color{magenta}{#1}", 1 ],

            epsi: [ "\\varepsilon", 0 ],
            leftsquarebracket: [ "[", 0 ],   // htmlthingy bug workaround
          }
        }
      });
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Cabin|Quicksand" rel="stylesheet">

    <script>
    // mark the selected page and open the menus leading to it
    // this is easier to write in javascript than in python
    document.addEventListener('DOMContentLoaded', () => {
        let thisPage = window.location.href.split('#')[0];
        if (thisPage.endsWith('/')) {
            thisPage += 'index.html';
        }

        const [selectedLink] = [...document.querySelectorAll('#sidebar a')]
            .filter(a => (a.href === thisPage));
        selectedLink.classList.add('this-page-or-section');

        let dropdown = selectedLink.parentElement;
        while (dropdown.classList.contains('dropdown')) {
            const label = dropdown.previousElementSibling;
            const checkbox = label.previousElementSibling;
            label.classList.add('this-page-or-section');
            checkbox.checked = true;

            dropdown = dropdown.parentElement;
        }
    });
    </script>
    <link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/animation.css">
</head>
<body>
<div id="content">
<div id="sidebar"><a href="../index.html">Front page</a>
        <input type="checkbox" id="sidebar-checkbox-0" />
        <label for="sidebar-checkbox-0">Equations and functions</label>
        <div class="dropdown">
            <a href="../eqs-and-funcs/inverse-funcs.html">Inverse functions</a><a href="../eqs-and-funcs/how-equations-work.html">How solving equations works</a><a href="../eqs-and-funcs/incdec-funcs.html">Strictly increasing/decreasing functions</a><a href="../eqs-and-funcs/how-inequations-work.html">How solving inequalities works</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-2" />
        <label for="sidebar-checkbox-2">Vectors</label>
        <div class="dropdown">
            
        <input type="checkbox" id="sidebar-checkbox-1" />
        <label for="sidebar-checkbox-1">Dot product</label>
        <div class="dropdown">
            <a href="../vectors/dot-projection.html">Projection</a><a href="../vectors/angle-between-vectors.html">Angle between vectors</a><a href="../vectors/iwi-jwj.html">$\I$'s with $\I$'s, $\J$'s with $\J$'s</a>
        </div>
        
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-3" />
        <label for="sidebar-checkbox-3">Sums and sequences</label>
        <div class="dropdown">
            <a href="../sums-and-seqs/sums.html">Sums</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-6" />
        <label for="sidebar-checkbox-6">Plane geometry</label>
        <div class="dropdown">
            
        <input type="checkbox" id="sidebar-checkbox-4" />
        <label for="sidebar-checkbox-4">Circle</label>
        <div class="dropdown">
            <a href="../plane-geometry/inscribed-angle-theorem.html">Inscribed angle theorem</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-5" />
        <label for="sidebar-checkbox-5">Triangle</label>
        <div class="dropdown">
            <a href="../plane-geometry/law-of-sines.html">Law of sines</a><a href="../plane-geometry/law-of-cosines.html">Law of cosines</a>
        </div>
        
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-11" />
        <label for="sidebar-checkbox-11">Analytic plane geometry</label>
        <div class="dropdown">
            
        <input type="checkbox" id="sidebar-checkbox-7" />
        <label for="sidebar-checkbox-7">Transforming curves</label>
        <div class="dropdown">
            <a href="../analytic-plane-geometry/reflect.html">Reflecting</a><a href="../analytic-plane-geometry/shift.html">Shifting</a><a href="../analytic-plane-geometry/stretch.html">Stretching</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-8" />
        <label for="sidebar-checkbox-8">Line</label>
        <div class="dropdown">
            <a href="../analytic-plane-geometry/line-eq-normal.html">Equation in normal form</a><a href="../analytic-plane-geometry/distance-line-point.html">Distance between line and point</a><a href="../analytic-plane-geometry/line-eq-slope.html">Equation with slope</a><a href="../analytic-plane-geometry/line-eq-slope-and-point.html">Equation from known slope and point</a><a href="../analytic-plane-geometry/angle-between-lines.html">Angle between lines</a><a href="../analytic-plane-geometry/slope-tan.html">Slope and tan</a><a href="../analytic-plane-geometry/line-eq-determinant.html">Equation with determinant</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-9" />
        <label for="sidebar-checkbox-9">Parabola</label>
        <div class="dropdown">
            <a href="../analytic-plane-geometry/parabola.html">Equation of parabola</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-10" />
        <label for="sidebar-checkbox-10">Hyperbola</label>
        <div class="dropdown">
            <a href="../analytic-plane-geometry/why-its-hyperbola.html">Why is $y=\frac{1}{x}$ a hyperbola?</a>
        </div>
        
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-16" />
        <label for="sidebar-checkbox-16">Calculus</label>
        <div class="dropdown">
            
        <input type="checkbox" id="sidebar-checkbox-12" />
        <label for="sidebar-checkbox-12">Limits</label>
        <div class="dropdown">
            <a href="limit-def.html">Definition of limit</a><a href="limit-basics.html">Limit basics</a><a href="limit-props.html">Limit properties</a><a href="limit-1sided.html">One-sided limits</a><a href="limit-ineq.html">Inequality and limit</a><a href="limit-vector.html">Limit of vector</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-13" />
        <label for="sidebar-checkbox-13">Continuity</label>
        <div class="dropdown">
            <a href="cont-def.html">Definitions of continuity</a><a href="cont-props.html">Continuity properties</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-14" />
        <label for="sidebar-checkbox-14">Derivative</label>
        <div class="dropdown">
            <a href="derivative-def.html">Definition of derivative</a><a href="derivative-notation.html">Notation for derivatives</a><a href="derivative-power-rule-1.html">Power rule, part 1</a><a href="derivative-basic-rules.html">Basic derivative rules</a><a href="derivative-chain-rule.html">Chain rule</a><a href="derivative-power-rule-2.html">Power rule, part 2</a><a href="derivative-product-quotient-rules.html">Product rule and quotient rule</a><a href="derivative-vector.html">Derivative of vector</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-15" />
        <label for="sidebar-checkbox-15">Integral</label>
        <div class="dropdown">
            <a href="integral-def.html">Definition of integral</a><a href="integral-refinement.html">Refinement of partition</a>
        </div>
        
        </div>
        </div>
<h1 id="refinement-of-partition">Refinement of Partition<a class="headerlink" href="#refinement-of-partition" title="Link to this title">¶</a></h1><p>Let $P$ and $R$ be partitions of $[a,b]$.
We say that $R$ is a <b>refinement</b> of $P$ if $R$ contains all partition numbers of $P$.</p>

<p><img width="328" height="124" class="asymptote" src="../asymptote/569bf65ab2e2b08be3554f7902488999.svg" /></p><p>Note that any partition is a refinement of itself
because it contains all partition numbers of itself.
</p>

<h2 id="upper-and-lower-sums-with-refinements">Upper and lower sums with refinements<a class="headerlink" href="#upper-and-lower-sums-with-refinements" title="Link to this title">¶</a></h2><p>Suppose that $R$ contains one more partition number than $P$,
and let $f$ be a function that is continuous on $[a,b]$.
Let $r$ be the partition number that $R$ has but $P$ doesn't have.
The upper sums look like this:</p>

<p><img width="402" height="201" class="asymptote" src="../asymptote/f1d1cf980fe1580353734e26d841bb54.svg" /></p><p><img width="402" height="201" class="asymptote" src="../asymptote/2ba54afac7a44281cdbd5ae815e5fe4b.svg" /></p><p>The upper sum with $R$ seems to be less than the upper sum with $P$.
We can also verify this without relying on a picture.
Let $x_1,x_2,\dots,x_n$ be the partition numbers of $P$,
and let $[x_{k-1},x_k]$ be the interval that contains $r$.
Now
$$
\text{upper sum with $P$} = (x_k-x_{k-1})\max_{[x_{k-1},x_k]}f + \text{other stuff}
$$
and
$$
\text{upper sum with $R$} = (r-x_{k-1})\max_{[x_{k-1},r]}f+(x_k-r)\max_{[r,x_k]}f + \text{other stuff},
$$
where other stuff is the areas of rectangles that are the same in $P$ and $R$.
Adding more numbers to the interval of a maximum (e.g. $[x_{k-1},r]$ to $[x_{k-1},x_k]$)
can't make the maximum smaller, so
$$
\begin{align}
&(r-x_{k-1})\max_{[x_{k-1},r]}f+(x_k-r)\max_{[r,x_k]}f \\
\le{}& (r-x_{k-1})\max_{[x_{k-1},x_k]}f+(x_k-r)\max_{[x_{k-1},x_k]}f \\
={}& (r-x_{k-1}+x_k-r)\max_{[x_{k-1},x_k]}f \\
={}& (x_k-x_{k-1})\max_{[x_{k-1},x_k]}f.
\end{align}
$$
This shows that the upper sum does not increase when adding one partition number.
It follows that it does not increase when adding several partition numbers.
A similar derivation works for lower sums.</p>

<div class="box graybox"><p>Suppose that $f$ is continuous on $[a,b]$, and let $P$ be a partition of $[a,b]$. Then
$$
\text{upper sum of $f$ with $P$} \ge \text{upper sum of $f$ with any refinement of $P$}
$$
and
$$
\text{lower sum of $f$ with $P$} \le \text{lower sum of $f$ with any refinement of $P$}.
$$
</p>

</div><p>We may have equality here, and not necessarily $>$ and $<$.
For example, if $f(x) = 3$ for all $x$, then any upper sum or lower sum on $\leftsquarebracket 2,4]$ is $6$
(see <a href="integral-def.html#example-integral-of-3">this example</a>).
</p>

<h2 id="upper-and-lower-sums-of-different-partitions">Upper and lower sums of different partitions<a class="headerlink" href="#upper-and-lower-sums-of-different-partitions" title="Link to this title">¶</a></h2><p>Let $P_1$ and $P_2$ be <b>any</b> partitions of $[a,b]$,
and let $f$ be a function that is continuous on $[a,b]$.
Let's make a third partition $R$ by combining all numbers of $P_1$ and $P_2$.</p>

<p><img width="333" height="126" class="asymptote" src="../asymptote/1245b470894d78686cfb23bd8e90140f.svg" /></p><p>Now $R$ is a refinement of both $P_1$ and $P_2$, so
$$
\begin{align}
\text{lower sum of $f$ with $P_1$}
&\le \text{lower sum of $f$ with $R$} \\
&\le \text{upper sum of $f$ with $R$} \\
&\le \text{upper sum of $f$ with $P_2$}.
\end{align}
$$</p>

<div class="box graybox"><p>Suppose that a function $f$ is continuous on $[a,b]$. Then
$$
\text{any lower sum} \le \text{any upper sum}.
$$
for any lower and upper sums of $f$ on $[a,b]$.
</p>

</div><p>Recall that we defined the integral to be the only number between any lower sum and any upper sum.
From the above result, it follows that such numbers <b>exist</b>, but there might be more than one of them.
If there were multiple numbers between any upper sum and any lower sum (the two dots in the below picture),
then there would be a "gap" between lower sums and upper sums:</p>

<p><img width="470" height="64" class="asymptote" src="../asymptote/6d6c66c9258126f11bf5e5a9319a664d.svg" /></p><p>If $f$ is continuous, there is no gap;
in other words, you can make the difference between an upper and lower sum as small as you want
by choosing appropriate partitions.
In the below picture, the red parts make up the difference of an upper sum and lower sum.</p>

<p><img width="300" height="420" class="asymptote" src="../asymptote/dcf083f9a99ea350131eb6782f3d3eb9.svg" /></p><p>We won't prove this better because it's surprisingly difficult and this is not a university.
</p>

</div>
</body>
</html>
