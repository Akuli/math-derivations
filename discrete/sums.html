<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sum Formulas
</title>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/CommonHTML"],
        tex2jax: {
          inlineMath: [ ['$','$'] ],
          displayMath: [ ['$$','$$'] ],
        },
        "HTML-CSS": { availableFonts: ["TeX"] },
        TeX: {
          Macros: {
            // awesome, latex inside javascript inside html inside python
            // https://xkcd.com/1638/
            Vec: [ "\\overrightarrow{#1}", 1 ],
            abs: [ "\\left| {#1} \\right|", 1 ],
            I: [ "\\vec{i}", 0 ],
            J: [ "\\vec{j}", 0 ],
            K: [ "\\vec{k}", 0 ],

            // funny operator name used only in one file
            rotate: [ "\\operatorname{rotate}", 0 ],

            // darkred is too dark, red is too bright
            red: [ "\\color{##c00}{#1}", 1 ],
            blue: [ "\\color{blue}{#1}", 1 ],
            green: [ "\\color{green}{#1}", 1 ],
            magenta: [ "\\color{magenta}{#1}", 1 ],

            epsi: [ "\\varepsilon", 0 ],
            leftsquarebracket: [ "[", 0 ],   // htmlthingy bug workaround

            // binom doesn't work on adder's computer
            // mybinom works, but it's too tall for inline math
            mybinom: [ "\\begin{pmatrix} {#1} \\\\ {#2} \\end{pmatrix}", 2 ],
          }
        }
      });
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Cabin|Quicksand" rel="stylesheet">

    <script>
    // mark the selected page and open the menus leading to it
    // this is easier to write in javascript than in python
    document.addEventListener('DOMContentLoaded', () => {
        let thisPage = window.location.href.split('#')[0];
        if (thisPage.endsWith('/')) {
            thisPage += 'index.html';
        }

        const [selectedLink] = [...document.querySelectorAll('#sidebar a')]
            .filter(a => (a.href === thisPage));
        selectedLink.classList.add('this-page-or-section');

        let dropdown = selectedLink.parentElement;
        while (dropdown.classList.contains('dropdown')) {
            const label = dropdown.previousElementSibling;
            const checkbox = label.previousElementSibling;
            label.classList.add('this-page-or-section');
            checkbox.checked = true;

            dropdown = dropdown.parentElement;
        }
    });
    </script>
    <link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/animation.css">

        <script src="../js/animator.js"></script>
        </head>
<body>
<div id="content">
<div id="sidebar"><a href="../index.html">Front page</a>
        <input type="checkbox" id="sidebar-checkbox-0" />
        <label for="sidebar-checkbox-0">Equations and functions</label>
        <div class="dropdown">
            <a href="../eqs-and-funcs/inverse-funcs.html">Inverse functions</a><a href="../eqs-and-funcs/how-equations-work.html">How solving equations works</a><a href="../eqs-and-funcs/incdec-funcs.html">Strictly increasing/decreasing functions</a><a href="../eqs-and-funcs/how-inequations-work.html">How solving inequalities works</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-2" />
        <label for="sidebar-checkbox-2">Vectors</label>
        <div class="dropdown">
            
        <input type="checkbox" id="sidebar-checkbox-1" />
        <label for="sidebar-checkbox-1">Dot product</label>
        <div class="dropdown">
            <a href="../vectors/dot-projection.html">Projection</a><a href="../vectors/angle-between-vectors.html">Angle between vectors</a><a href="../vectors/iwi-jwj.html">$\I$'s with $\I$'s, $\J$'s with $\J$'s</a>
        </div>
        
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-3" />
        <label for="sidebar-checkbox-3">Discrete math</label>
        <div class="dropdown">
            <a href="sums.html">Sum formulas</a><a href="binom.html">Binomial coefficients</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-6" />
        <label for="sidebar-checkbox-6">Plane geometry</label>
        <div class="dropdown">
            
        <input type="checkbox" id="sidebar-checkbox-4" />
        <label for="sidebar-checkbox-4">Circle</label>
        <div class="dropdown">
            <a href="../plane-geometry/inscribed-angle-theorem.html">Inscribed angle theorem</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-5" />
        <label for="sidebar-checkbox-5">Triangle</label>
        <div class="dropdown">
            <a href="../plane-geometry/law-of-sines.html">Law of sines</a><a href="../plane-geometry/law-of-cosines.html">Law of cosines</a>
        </div>
        
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-11" />
        <label for="sidebar-checkbox-11">Analytic plane geometry</label>
        <div class="dropdown">
            
        <input type="checkbox" id="sidebar-checkbox-7" />
        <label for="sidebar-checkbox-7">Transforming curves</label>
        <div class="dropdown">
            <a href="../analytic-plane-geometry/reflect.html">Reflecting</a><a href="../analytic-plane-geometry/shift.html">Shifting</a><a href="../analytic-plane-geometry/stretch.html">Stretching</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-8" />
        <label for="sidebar-checkbox-8">Line</label>
        <div class="dropdown">
            <a href="../analytic-plane-geometry/line-eq-normal.html">Equation in normal form</a><a href="../analytic-plane-geometry/distance-line-point.html">Distance between line and point</a><a href="../analytic-plane-geometry/line-eq-slope.html">Equation with slope</a><a href="../analytic-plane-geometry/line-eq-slope-and-point.html">Equation from known slope and point</a><a href="../analytic-plane-geometry/angle-between-lines.html">Angle between lines</a><a href="../analytic-plane-geometry/slope-tan.html">Slope and tan</a><a href="../analytic-plane-geometry/line-eq-determinant.html">Equation with determinant</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-9" />
        <label for="sidebar-checkbox-9">Parabola</label>
        <div class="dropdown">
            <a href="../analytic-plane-geometry/parabola.html">Equation of parabola</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-10" />
        <label for="sidebar-checkbox-10">Hyperbola</label>
        <div class="dropdown">
            <a href="../analytic-plane-geometry/why-its-hyperbola.html">Why is $y=\frac{1}{x}$ a hyperbola?</a>
        </div>
        
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-16" />
        <label for="sidebar-checkbox-16">Calculus</label>
        <div class="dropdown">
            
        <input type="checkbox" id="sidebar-checkbox-12" />
        <label for="sidebar-checkbox-12">Limits</label>
        <div class="dropdown">
            <a href="../calc/limit-def.html">Definition of limit</a><a href="../calc/limit-basics.html">Limit basics</a><a href="../calc/limit-props.html">Limit properties</a><a href="../calc/limit-1sided.html">One-sided limits</a><a href="../calc/limit-ineq.html">Inequality and limit</a><a href="../calc/limit-vector.html">Limit of vector</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-13" />
        <label for="sidebar-checkbox-13">Continuity</label>
        <div class="dropdown">
            <a href="../calc/cont-def.html">Definitions of continuity</a><a href="../calc/cont-props.html">Continuity properties</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-14" />
        <label for="sidebar-checkbox-14">Derivative</label>
        <div class="dropdown">
            <a href="../calc/derivative-def.html">Definition of derivative</a><a href="../calc/derivative-notation.html">Notation for derivatives</a><a href="../calc/derivative-power-rule-1.html">Power rule, part 1</a><a href="../calc/derivative-basic-rules.html">Basic derivative rules</a><a href="../calc/derivative-chain-rule.html">Chain rule</a><a href="../calc/derivative-power-rule-2.html">Power rule, part 2</a><a href="../calc/derivative-product-quotient-rules.html">Product rule and quotient rule</a><a href="../calc/derivative-vector.html">Derivative of vector</a>
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-15" />
        <label for="sidebar-checkbox-15">Integral</label>
        <div class="dropdown">
            <a href="../calc/integral-intro.html">Introduction to integrals</a><a href="../calc/integral-refinement.html">Refinement of partition</a><a href="../calc/integral-def.html">Defining the integral</a><a href="../calc/integral-average.html">Average</a><a href="../calc/integral-ftoc1.html">Fundamental theorem of calculus, part 1</a><a href="../calc/integral-ftoc2.html">Fundamental theorem of calculus, part 2</a><a href="../calc/integral-notation.html">More notation for integrals</a><a href="../calc/integral-rules.html">Integral rules</a><a href="../calc/integral-usub.html">U substitution</a><a href="../calc/integral-sor-volume.html">Volume of solid of revolution</a><a href="../calc/integral-sor-area.html">Area of surface of revolution</a>
        </div>
        
        </div>
        
        <input type="checkbox" id="sidebar-checkbox-17" />
        <label for="sidebar-checkbox-17">Complex numbers</label>
        <div class="dropdown">
            <a href="../complex/intro.html">Introduction</a><a href="../complex/angle-and-len.html">Angle and length</a><a href="../complex/mul.html">Multiplication</a><a href="../complex/div.html">Division</a><a href="../complex/sqrt.html">Square root</a><a href="../complex/derivative.html">Derivative</a><a href="../complex/exp.html">Exponent function</a>
        </div>
        </div>
<h1 id="sum-formulas">Sum Formulas<a class="headerlink" href="#sum-formulas" title="Link to this title">¶</a></h1><p>The results on this page work for any integer $n \ge 1$.
I animated the derivations with $n=7$, but similar derivations work for any other $n$ too.
</p>

<h2 id="sum-of-positive-integers-up-to-n">Sum of positive integers up to $n$<a class="headerlink" href="#sum-of-positive-integers-up-to-n" title="Link to this title">¶</a></h2><p>Let's calculate
$$
1 + 2 + 3 + \dots + n.
$$
This animation shows how this goes for $n=7$:</p>


    <div id="anim-sum-of-integers"></div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            function run() {
                window.animator.run("anim-sum-of-integers", ...arguments);
            }
                const n = 7;
    const originalSquares = Array(n).fill().map(() => document.createElement('div'));
    const copiedSquares = Array(n).fill().map(() => document.createElement('div'));

    run([
        (
            originalSquares.map((element, x) => ({
                type: 'create',
                element, x,
                y: 0,
                textContent: x+1,
                classes: 'square',
                css: {zIndex: 2},
            }))
        ).concat(
            copiedSquares.map((element, x) => ({
                type: 'create',
                element, x,
                y: 0,
                textContent: x+1,
                classes: 'square color1',
                css: {zIndex: 1},
            }))
        ),
        copiedSquares.map(element => ({type: 'config', element, dy: 2})),
        copiedSquares.map((element, x) => ({type: 'config', element, x: n-x-1})),
        ...originalSquares.map((origSquare, x) => {
            const copySquare = copiedSquares[n-x-1];
            return [
                {type: 'config', element: origSquare, textContent: n+1, y: 1, classes: 'merged'},
                {type: 'config', element: copySquare, y: 1},
            ];
        }),
    ]);

        });
    </script>
    <p>In the beginning, $1+2+\dots+n$ is represented with numbers inside squares,
so we are interested in <b>the sum of all numbers in the squares</b>.
This sum doubles when we make a copy of each square, but
it doesn't change in other ways because the numbers get added when squares merge together.
We ended up with $n+1=8$ showing $n$ times, once in each of the $n$ squares, so
$$
\begin{align}
1+2+3+\dots+n
&= \text{sum of numbers in the beginning} \\
&= \frac{1}{2}(\text{sum of numbers at end of animation}) \\
&= \frac{1}{2}n(n+1).
\end{align}
$$</p>

<div class="box graybox"><p>$$
1+2+\dots+n = \frac{n(n+1)}{2}
$$
</p>

</div><h2 id="sum-of-squares">Sum of squares<a class="headerlink" href="#sum-of-squares" title="Link to this title">¶</a></h2><p><small>This derivation is based on <a href="https://www.youtube.com/watch?v=3IX-ukfgZdk">this video</a>.</small></p>

<p>Let's calculate
$$
1^2 + 2^2 + 3^2 + \dots + n^2.
$$
This animation shows how this goes for $n=7$:</p>


    <div id="anim-sum-of-squares"></div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            function run() {
                window.animator.run("anim-sum-of-squares", ...arguments);
            }
                function sumOfIntegersUpTo(n) { return n*(n+1)/2; }
    function range(n) { return Array(n).fill().map((junk, number) => number); }
    const n = 7;

    const differentSizeSquares = range(n)
        .map(i => i+1)
        .map(size =>
            range(n*n)
            .map(i => ({x: i%n, y: Math.floor(i/n)}))
            .filter(({x, y}) => x < size && y < size)
            .map(({x, y}) => ({
                x,
                y,
                element: document.createElement('div'),
                initialX: (
                    (size >= 5) ?
                        sumOfIntegersUpTo(size-1)-sumOfIntegersUpTo(4) + (size-5)
                    :
                        sumOfIntegersUpTo(size-1) + (size-1)
                ) + x - n,
                initialY: ((size >= 5) ? 5 : 0) + y - n,
            }))
        );

    const basicSquares = differentSizeSquares[n-1];

    const topCopy  = range(n*n).map(i => ({x: i%n, y: Math.floor(i/n), element: document.createElement('div')}));
    const leftCopy = range(n*n).map(i => ({x: i%n, y: Math.floor(i/n), element: document.createElement('div')}));

    run([
        differentSizeSquares.map((squareList, size) => squareList.map(({x, y, initialX, initialY, element}) => ({
            type: 'create',
            element,
            x: initialX,
            y: initialY,
            textContent: 1,
            classes: 'square',
            css: {zIndex: 2},
        }))).flat(),

        differentSizeSquares.map(squareList => squareList.map(({x, y, element}) => ({
            type: 'config',
            element, x, y,
            textContent: (squareList.length === n*n) ? (n - Math.max(x, y)) : undefined,
        }))).flat(),

        (
            differentSizeSquares
            .filter(squareList => squareList.length !== n*n)
            .flat()
            .map(({element}) => ({type: 'delete', element}))
        ).concat(
            topCopy.concat(leftCopy).map(({x, y, element}) => ({
                type: 'create',
                element, x, y,
                textContent: n - Math.max(x, y),
                classes: 'square',
                css: {zIndex: 1},
            }))
        ).concat(
            topCopy.map(({element}) => ({type: 'config', element, classes: 'color1'}))
        ).concat(
            leftCopy.map(({element}) => ({type: 'config', element, classes: 'color2'}))
        ),

        (
            topCopy.map(({x, y, element}) => ({type: 'config', element, x, y: -y-1}))
        ).concat(
            leftCopy.map(({x, y, element}) => ({type: 'config', element, x: -x-1, y}))
        ),

        basicSquares.map(({x, y, element}) => ({
            type: 'config',
            dx: (x < y) ? -n : (x > y) ? n : 0,
            dy: (x < y) ? n : (x > y) ? -n : 0,
            element,
        })),

        basicSquares.map(({x, y, element}) => ({
            type: 'config',
            dx: (x > y) ? -y : 0,
            dy: (x < y) ? -x : 0,
            css: {zIndex: 3},
            element,
        })),

        ...range(n-1).map(movingRowOrColumn =>
            basicSquares
            .filter(({x, y}) => x !== y && Math.min(x, y) === movingRowOrColumn)
            .map(({x, y, element}) => ({
                type: 'config',
                element,
                classes: 'merged',
                textContent: n - Math.abs(x-y) + 1,
                ...(x<y ? {dy: -n-1} : {dx: -n-1}),
            }))
        ),
    ]);

        });
    </script>
    <p>In the beginning, $4^2$ is represented with $16 = 4 \cdot 4$ squares, each containing $1$.
The the sum of all numbers in those squares is $4^2$.
We represent other things being added similarly.</p>

<p>During the animation, the sum of all numberes
changes only when the red and green copies of the drawing are created, and that triples the sum.
At the end of the animation,
there are $n$ rows, $n$ columns and $1$ diagonal of squares showing $1+2+\dots+n$.
This means that we have $1+2+\dots+n$, repeated $2n+1$ times.
With these things and the result from the previous derivation, we get
$$
\begin{align}
1^2 + 2^2 + \dots + n^2
&= \text{sum of numbers in the beginning} \\
&= \frac{1}{3}(\text{sum of numbers at end of animation}) \\
&= \frac{1}{3}(2n+1)(1+2+\dots+n) \\
&= \frac{1}{3}(2n+1)\frac{n(n+1)}{2} \\
&= \frac{n(n+1)(2n+1)}{6}.
\end{align}
$$</p>

<div class="box graybox"><p>$$
1^2+2^2+\dots+n^2 = \frac{n(n+1)(2n+1)}{6}
$$
</p>

</div><h2 id="sum-of-cubes">Sum of cubes<a class="headerlink" href="#sum-of-cubes" title="Link to this title">¶</a></h2><p>As usual, the animation below has $n=7$.</p>


    <div id="anim-sum-of-cubes"></div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            function run() {
                window.animator.run("anim-sum-of-cubes", ...arguments);
            }
                function mulString(a, b) { return `${a}⋅${b}`; }
    const n = 7;

    const repeatedRows = Array(n).fill().map((junk, i) => i+1).map(rowCount =>
        Array(rowCount).fill().map(() => Array(n).fill().map(() => document.createElement('div')))
    );
    const mulTable = repeatedRows
        .map(rowList => rowList[rowList.length - 1])
        .map((lastRow, y) => lastRow.map((element, x) => ({
            x, y, element,
            partNumber: Math.max(x, y),
        })))
        .flat();

    run([
        repeatedRows.map(rowList => ({
            rowList,
            xFirst: (n+1)*(rowList.length-1>=4),
            yFirst: rowList.length>=5 ? (rowList.length-1)*rowList.length/2 - 5*6/2 + rowList.length : (rowList.length-1)*rowList.length/2+rowList.length-1,
        })).map(({rowList, xFirst, yFirst}) =>
            rowList.map((row, rowNumber) =>
                row.map((element, x) => ({
                    type: 'create',
                    x: xFirst + x,
                    y: yFirst + rowNumber,
                    element,
                    classes: 'square',
                    textContent: x+1,
                }))
            )
        ).flat().flat(),

        (
            repeatedRows.map(rowList => rowList.map((row, rowNumber) => row.map(element => ({
                type: 'config',
                element,
                dy: -rowNumber,
            })))).flat().flat()
        ).concat(
            repeatedRows
            .map(rowList => ({lastRow: rowList[rowList.length - 1], rowCount: rowList.length}))
            .map(({lastRow, rowCount}) => lastRow.map((element, x) => ({
                type: 'config',
                element,
                textContent: mulString(rowCount, x+1),
            })))
            .flat()
        ),

        repeatedRows
        .flat()
        .flat()
        .filter(el => !mulTable.map(({element}) => element).includes(el))
        .map(element => ({
            type: 'delete',
            element,
        })),

        mulTable.map(({element, x, y, partNumber}) => ({
            type: 'config',
            element, x, y,
            css: {zIndex: (x === partNumber) ? 1 : 2},  // left row in front of right row when merging
        })),

        mulTable.map(({partNumber, element}) => ({
            type: 'config',
            element,
            dx: 1.5*partNumber,
            dy: 0*partNumber,
        })),

        mulTable.map(({partNumber, element, x}) => ({
            type: 'config',
            element,
            dx: (x < partNumber)*(partNumber-x-1),
            dy: (x < partNumber)*(-x-1),
        })),

        ...Array(n)
            .fill()
            .map((junk, i) => i)
            .filter(partNumber => partNumber !== 0)
            .map(partNumber =>
                mulTable
                .filter(item => item.partNumber === partNumber)
                .filter(({x}) => x < partNumber)   // exclude right row
                .reverse()
                .map(({element}) => ({
                    type: 'config',
                    element,
                    dx: 1,
                    textContent: mulString(partNumber+1, partNumber+1),
                    classes: 'merged',
                }))
            ),
    ]);

        });
    </script>
    <p>In the beginning, there are many copies of $1+2+\dots+n$.
There's one copy in top left corner, then two copies below that, and so on until $n$ copies at bottom right.
For that reason, the number of copies is $1+2+\dots+n$;
we have $1+2+\dots+n$ copies of $1+2+\dots+n$.
This means that the sum of all numbers is
$$
\begin{align}
(1+2+\dots+n)(1+2+\dots+n)
&= (1+2+\dots+n)^2 \\
&= \left( \frac{n(n+1)}{2} \right)^2 \\
&= \frac{n^2(n+1)^2}{4},
\end{align}
$$
where the first result on this page was used to calculate $1+2+\dots+n$.</p>

<p>The sum of all numbers doesn't change during the animation.
At the end, there is a column that contains $5$ squares with $5 \cdot 5$ in each, so a total of
$$
5(5 \cdot 5) = 5^3,
$$
and similarly, the sums of numbers in each column are $1^3, 2^3, \dots, n^3$.
For this reason, the sum of all numbers is
$$
1^3 + 2^3 + 3^3 + \dots + n^3.
$$</p>

<div class="box graybox"><p>$$
1^3 + 2^3 + 3^3 + \dots + n^3 = \frac{n^2(n+1)^2}{4}
$$
</p>

</div></div>
</body>
</html>
